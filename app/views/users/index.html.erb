<% content_for :head do %>
    <script type="text/javascript" src="/js/jquery-1.4.1.min.js"></script>
    <script type="text/javascript" src="/js/jquery.dataTables.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function()
        {
            $('#userTable').dataTable({
                "bPaginate": false,
                "bInfo": false,
                "oLanguage": {
                    "sSearch": "S&oslash;k:",
                    "sZeroRecords": "Ingen treff"
                },
                "aaSorting": [
                    [1,'asc']
                ]
            });
        }
                );
    </script>
<% end %>

<h2>Brukere</h2>

<table id="userTable">
  <thead>
  <tr>
    <th>Username</th>
    <th>E-mail</th>
    <th>Created</th>
    <th>Updated</th>
    <th>Login Count</th>
    <th>Failed Login Count</th>
    <th>Last Request</th>
    <th>Current Login</th>
    <th>Last Login</th>
    <th>Current Login IP</th>
    <th>Last Login IP</th>
    <th>Roles</th>
  </tr>
  </thead>
  <tbody>
  <% for user in @users %>
      <tr>
        <td>
          <%= user.username %>
        </td>
        <td>
          <%= user.email %>
        </td>
        <td>
          <%= user.created_at %>
        </td>
        <td>
          <%= user.updated_at %>
        </td>
        <td>
          <%= user.login_count %>
        </td>
        <td>
          <%= user.failed_login_count %>
        </td>
        <td>
          <%= user.last_request_at %>
        </td>
        <td>
          <%= user.current_login_at %>
        </td>
        <td>
          <%= user.last_login_at %>
        </td>
        <td>
          <%= user.current_login_ip %>
        </td>
        <td>
          <%= user.last_login_ip %>
        </td>
        <td>
          <ul>
            <% user.roles.each do |role| %>
                <li><%= role.name %></li>
            <% end %>
          </ul>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>
